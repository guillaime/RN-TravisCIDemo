desc "Submit a new Beta Build to Crashlytics Beta"

lane :beta do |values|

    gradle(task: "clean")
    gradle(
      task: "assembleRelease",
      #project_dir: "android/",
      properties: {
        'android.useDeprecatedNdk' => true,
        'android.injected.signing.store.file' => '/home/travis/build/guillaime/RN-TravisCIDemo/android/keystores/keystore.keystore',
        'android.injected.signing.store.password' => 'password',
        'android.injected.signing.key.alias'=> 'traviscidemo',
        'android.injected.signing.key.password' => 'password'
      }
    )

    upload_to_play_store(track: 'internal')

    crashlytics(
      api_token: '$CRASHLYTICS_API_KEY',
      build_secret: '$CRASHLYTICS_BUILD_SECRET',
      debug: true,
      notifications: true
    )
end

lane :build do |values|
    gradle(task: "clean")
    gradle(
      task: "assembleRelease",
      #project_dir: "android/",
      properties: {
        'android.useDeprecatedNdk' => true,
        'android.injected.signing.store.file' => '/home/travis/build/guillaime/RN-TravisCIDemo/android/keystores/keystore.keystore',
        'android.injected.signing.store.password' => '$TCD_RELEASE_STORE_PASSWORD',
        'android.injected.signing.key.alias'=> '$TCD_RELEASE_KEY_ALIAS',
        'android.injected.signing.key.password' => '$TCD_RELEASE_KEY_PASSWORD'
      }
    )
end